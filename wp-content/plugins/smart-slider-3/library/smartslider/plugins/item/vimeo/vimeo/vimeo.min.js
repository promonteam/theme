N2Require("ItemVimeo",["Item"],["smartSlider"],function(e,t,o,i){"use strict";function r(){this.type="vimeo",t.Item.prototype.constructor.apply(this,arguments)}return r.prototype=Object.create(t.Item.prototype),r.prototype.constructor=r,r.needSize=!0,r.prototype.added=function(){this.needFill=["vimeourl"],nextend.smartSlider.generator.registerField(e("#item_vimeovimeourl"))},r.prototype.getName=function(e){return e.vimeourl},r.prototype.parseAll=function(o){var i=this.values.vimeourl!=o.vimeourl;if(t.Item.prototype.parseAll.apply(this,arguments),""==o.image&&(o.image="$system$/images/placeholder/video.png"),o.image=nextend.imageHelper.fixed(o.image),i&&""!=o.vimeourl){var r=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,n=o.vimeourl.match(r),a=!1;n?a=n[3]:o.vimeourl.match(/^[0-9]+$/)&&(a=o.vimeourl),a?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+encodeURI(a)+".json").done(e.proxy(function(t){e("#item_vimeoimage").val(t[0].thumbnail_large).trigger("change")},this)).fail(function(e){nextend.notificationCenter.error(e.responseText)}):nextend.notificationCenter.error("The provided URL does not match any known Vimeo url or code!")}},r.prototype._render=function(t){var o=e('<div class="n2-ow"></div>').css({width:"100%",height:"100%",minHeight:"50px",background:"url("+t.image+") no-repeat 50% 50%",backgroundSize:"cover"});e('<div class="n2-video-play n2-ow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><g fill="none" fill-rule="evenodd"><circle cx="24" cy="24" r="24" fill="#000" opacity=".6"/><path fill="#FFF" d="M19.8 32c-.124 0-.247-.028-.36-.08-.264-.116-.436-.375-.44-.664V16.744c.005-.29.176-.55.44-.666.273-.126.592-.1.84.07l10.4 7.257c.2.132.32.355.32.595s-.12.463-.32.595l-10.4 7.256c-.14.1-.31.15-.48.15z"/></g></svg></div>').appendTo(o),this.$item.append(o)},r.prototype.fitLayer=function(){return!0},r});